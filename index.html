<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IÂ²IT College Event Manager</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body x-data="app()">
    <!-- Loading Screen -->
    <div class="loading-screen" x-show="isLoading" x-transition>
        <div class="loader">
            <div class="logo-container">
                <img src="logo.png" alt="IÂ²IT Logo" class="college-logo loading-logo">
            </div>
            <div class="loader-circle"></div>
            <h3>IÂ²IT Event Club Manager</h3>
            <p>Loading your events...</p>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <div class="sidebar" :class="{ 'sidebar-open': sidebarOpen }" x-show="currentUser">
        <div class="sidebar-header">
            <div class="logo">
                <img src="logo.png" alt="IÂ²IT Logo" class="college-logo">
                <span>IÂ²IT Events</span>
            </div>
            <button class="sidebar-toggle" @click="sidebarOpen = !sidebarOpen">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="user-profile" x-show="currentUser" x-transition>
            <div class="profile-image">
                <img src="./My_Cover_Photo.jpg" alt="Profile Photo">
                <div class="status-indicator online"></div>
            </div>
            <div class="profile-info">
                <h4 x-text="currentUser?.username"></h4>
                <span x-text="currentUser?.role === 'admin' ? 'Administrator' : (currentUser?.role === 'clubHead' ? ('Club Head - ' + getClubName(currentUser?.club)) : 'Student')"></span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="#" @click.prevent="currentPage = 'dashboard'; sidebarOpen = false" 
               :class="{ active: currentPage === 'dashboard' }">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'calendar'; sidebarOpen = false" 
               :class="{ active: currentPage === 'calendar' }">
                <span>Calendar</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'events'; sidebarOpen = false" 
               x-show="canCreateEvent()"
               :class="{ active: currentPage === 'events' }">
                <i class="fas fa-plus-circle"></i>
                <span>Add Event</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'about'; sidebarOpen = false" 
               :class="{ active: currentPage === 'about' }">
                <i class="fas fa-info-circle"></i>
                <span>About</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'contact'; sidebarOpen = false" 
               :class="{ active: currentPage === 'contact' }">
                <i class="fas fa-envelope"></i>
                <span>Contact</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'requests'; sidebarOpen = false" x-show="canManageRequests()" :class="{ active: currentPage === 'requests' }">
                <i class="fas fa-user-check"></i>
                <span>Requests</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'userManagement'; sidebarOpen = false" x-show="isAdmin()" :class="{ active: currentPage === 'userManagement' }">
                <i class="fas fa-users-cog"></i>
                <span>User Management</span>
            </a>
            <a href="#" @click.prevent="currentPage = 'login'; sidebarOpen = false" x-show="!currentUser" :class="{ active: currentPage === 'login' }">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="quick-stats">
                <div class="stat-item">
                    <span class="stat-number" x-text="events.length"></span>
                    <span class="stat-label">Total Events</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" x-text="getUpcomingEvents().length"></span>
                    <span class="stat-label">Upcoming</span>
                </div>
            </div>
            <div style="margin-top: 1rem; display:flex; gap:.5rem;" x-show="currentUser">
                <button class="btn-secondary" @click="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" :class="{ 'sidebar-open': sidebarOpen }">
        <!-- Top Header -->
        <header class="top-header" x-show="currentUser">
            <div class="header-left">
                <button class="menu-toggle" @click="sidebarOpen = !sidebarOpen">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-logo">
                    <img src="logo.png" alt="IÂ²IT Logo" class="college-logo header-logo-img">
                </div>
                <div class="breadcrumb">
                    <span x-text="getPageTitle()"></span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search events..." x-model="searchQuery">
                </div>
                
                <div class="header-actions">
                    <button class="notification-btn" @click="showNotifications = !showNotifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" x-show="getUpcomingEvents().length > 0" x-text="getUpcomingEvents().length"></span>
                    </button>
                    
                    <div class="club-selector">
                        <select x-model="selectedClub" @change="filterEvents()" :disabled="isClubHead() || isStudent()">
                            <option value="all">All Clubs</option>
                            <option value="astronomy">ðŸ”­ Astronomy Club</option>
                            <option value="sports">âš½ Sports Club</option>
                            <option value="gdg">ðŸ’» GDG Club</option>
                            <option value="music">ðŸŽµ Music Club</option>
                            <option value="drama">ðŸŽ­ Drama Club</option>
                            <option value="IEEE">ðŸ¦´ IEEE Club</option>
                            <option value="ACM">ðŸ’» ACM Club</option>
                            <option value="ITSA">ðŸ‘Œ ITSA Club</option>
                            <option value="CESA">ðŸ‘Ž CESA Club</option>
                            <option value="IIC">ðŸ’¡ IIC Club</option>
                            <option value="cybersec">ðŸ’» Cybersec Club</option>
                            
                        </select>
                        <div x-show="isStudent()" style="color:#64748b; font-size:.85rem; margin-top:.25rem;">Club visibility locked to your membership</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Notifications Dropdown -->
        <div class="notifications-dropdown" x-show="showNotifications && currentUser" @click.away="showNotifications = false">
            <div class="notifications-header">
                <h4>Notifications</h4>
                <button @click="markAllAsRead()">Mark all read</button>
            </div>
            <div class="notifications-list">
                <template x-for="event in getUpcomingEvents().slice(0, 5)">
                    <div class="notification-item">
                        <div class="notification-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="notification-content">
                            <p x-text="event.name"></p>
                            <span x-text="formatEventTime(event.date, event.time)"></span>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Login Page -->
            <div class="page" x-show="currentPage === 'login'">
                <div class="event-form-container">
                    <div class="form-header">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 60px; height: 60px; margin-bottom: 1rem;">
                        <h2>Login</h2>
                        <p>Sign in to access IÂ²IT Events</p>
                    </div>
                    <form class="event-form" @submit.prevent="login">
                        <div class="form-group">
                            <label for="loginUsername"><i class="fas fa-user"></i> Username</label>
                            <input id="loginUsername" type="text" x-model="loginForm.username" placeholder="e.g. admin, student, head_gdg" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword"><i class="fas fa-lock"></i> Password</label>
                            <input id="loginPassword" type="password" x-model="loginForm.password" placeholder="Your password" required>
                        </div>
                        <div class="form-actions center">
                            <button type="submit" class="btn-primary"><i class="fas fa-sign-in-alt"></i> Login</button>
                        </div>
                        <p class="auth-error" x-text="loginError" x-show="loginError"></p>
                        
                    </form>
                </div>
            </div>
            <!-- Dashboard Page -->
            <div class="page" x-show="currentPage === 'dashboard'">
                <div class="dashboard-header">
                    <div class="dashboard-logo-container">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo dashboard-logo">
                    </div>
                    <h1>Welcome back, <span x-text="currentUser?.username || 'User'"></span>!</h1>
                    <p>Here's what's happening at IÂ²IT today</p>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-content">
                            <h3 x-text="getTodayEvents().length"></h3>
                            <p>Today's Events</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 x-text="getUpcomingEvents().length"></h3>
                            <p>Upcoming Events</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3>5</h3>
                            <p>Active Clubs</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content">
                            <h3 x-text="getCompletedEvents().length"></h3>
                            <p>Completed Events</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2>Today's Events</h2>
                            <a href="#" @click.prevent="currentPage = 'calendar'">View All</a>
                        </div>
                        <div class="events-grid">
                            <template x-for="event in getTodayEvents()">
                                <div class="event-card" :class="event.club">
                                    <div class="event-header">
                                        <div class="event-time">
                                            <i class="fas fa-clock"></i>
                                            <span x-text="event.time"></span>
                                        </div>
                                        <div class="event-club-badge" x-text="getClubName(event.club)"></div>
                                    </div>
                                    <h3 x-text="event.name"></h3>
                                    <p x-text="event.description"></p>
                                    <div class="event-actions">
                                        <button @click="showEventDetails(event)">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button @click="editEvent(event)" x-show="isAdmin() || (isClubHead() && event.club === currentUser?.club)">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2>Quick Actions</h2>
                        </div>
                        <div class="quick-actions">
                            <button class="action-btn" @click="currentPage = 'events'" x-show="canCreateEvent()">
                                <i class="fas fa-plus"></i>
                                <span>Add New Event</span>
                            </button>
                            <button class="action-btn" @click="currentPage = 'calendar'">
                                <span>View Calendar</span>
                            </button>
                            <button class="action-btn" @click="exportEvents()">
                                <i class="fas fa-download"></i>
                                <span>Export Events</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daily Events Page -->
            <div class="page" x-show="currentPage === 'calendar'">
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="calendar-nav">
                            <h2 x-text="showAllEvents ? 'All Events' : 'Daily Events'"></h2>
                        </div>
                        <div class="calendar-actions" style="gap:.75rem; align-items:center;">
                            <label style="display:flex; align-items:center; gap:.5rem; font-size:.9rem; color:var(--text-secondary);">
                                <input type="checkbox" x-model="showAllEvents"> Show all
                            </label>
                            <template x-if="!showAllEvents">
                                <div style="display:flex; gap:.75rem; align-items:center;">
                                    <input type="date" x-model="selectedDate" style="padding:.5rem; border:1px solid var(--border-color); border-radius:8px;">
                                    <button @click="selectedDate = dateToLocalYMD(new Date())" class="today-btn">Today</button>
                                    <div style="font-weight:600; color: var(--text-secondary);">Count: <span x-text="selectedDayCount"></span></div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div class="events-grid" x-show="!showAllEvents">
                        <template x-if="selectedDayEvents.length === 0">
                            <div class="event-card">
                                <h3>No events for this date</h3>
                                <p>Pick another date or add a new event.</p>
                            </div>
                        </template>
                        <template x-for="event in selectedDayEvents" :key="event.id">
                            <div class="event-card" :class="event.club">
                                <div class="event-header">
                                    <div class="event-time">
                                        <i class="fas fa-clock"></i>
                                        <span x-text="event.time"></span>
                                    </div>
                                    <div class="event-club-badge" x-text="getClubName(event.club)"></div>
                                </div>
                                <h3 x-text="event.name"></h3>
                                <p x-text="event.description"></p>
                                <div class="event-actions">
                                    <button @click="showEventDetails(event)">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button @click="editEvent(event)" x-show="isAdmin() || (isClubHead() && event.club === currentUser?.club)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>

                    <div class="events-grid" x-show="showAllEvents">
                        <template x-if="allVisibleEvents.length === 0">
                            <div class="event-card">
                                <h3>No events available</h3>
                                <p>Events will appear here once created.</p>
                            </div>
                        </template>
                        <template x-for="event in allVisibleEvents" :key="event.id">
                            <div class="event-card" :class="event.club">
                                <div class="event-header">
                                    <div class="event-time">
                                        <i class="fas fa-clock"></i>
                                        <span x-text="formatEventTime(event.date, event.time)"></span>
                                    </div>
                                    <div class="event-club-badge" x-text="getClubName(event.club)"></div>
                                </div>
                                <h3 x-text="event.name"></h3>
                                <p x-text="event.description"></p>
                                <div class="event-actions">
                                    <button @click="showEventDetails(event)">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button @click="editEvent(event)" x-show="isAdmin() || (isClubHead() && event.club === currentUser?.club)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Add Event Page -->
            <div class="page" x-show="currentPage === 'events' && canCreateEvent()">
                <div class="event-form-container">
                    <div class="form-header">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 60px; height: 60px; margin-bottom: 1rem;">
                        <h2>Add New Event</h2>
                        <p>Create a new event for IÂ²IT College</p>
                    </div>
                    
                    <form @submit.prevent="addEvent" class="event-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="eventName">
                                    <i class="fas fa-tag"></i>
                                    Event Name
                                </label>
                                <input type="text" id="eventName" x-model="newEvent.name" required 
                                       placeholder="Enter event name">
                            </div>
                            <div class="form-group">
                                <label for="eventClub">
                                    <i class="fas fa-users"></i>
                                    Club
                                </label>
                                <select id="eventClub" x-model="newEvent.club" :disabled="isClubHead()" required>
                                    <option value="">Select Club</option>
                                    <option value="astronomy">ðŸ”­ Astronomy Club</option>
                                    <option value="sports">âš½ Sports Club</option>
                                    <option value="gdg">ðŸ’» GDG Club</option>
                                    <option value="music">ðŸŽµ Music Club</option>
                                    <option value="drama">ðŸŽ­ Drama Club</option>
                                    <option value="IEEE">ðŸ¦´ IEEE Club</option>
                            <option value="ACM">ðŸ’» ACM Club</option>
                            <option value="ITSA">ðŸ‘Œ ITSA Club</option>
                            <option value="CESA">ðŸ‘Ž CESA Club</option>
                            <option value="IIC">ðŸ’¡ IIC Club</option>
                            <option value="cybersec">ðŸ’» Cybersec Club</option>
                                </select>
                                <div x-show="isClubHead()" style="color:#64748b; font-size:.85rem; margin-top:.25rem;">Club locked to <strong x-text="getClubName(currentUser?.club)"></strong></div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="eventDate">
                                    <i class="fas fa-calendar"></i>
                                    Date
                                </label>
                                <input type="date" id="eventDate" x-model="newEvent.date" required>
                            </div>
                            <div class="form-group">
                                <label for="eventTime">
                                    <i class="fas fa-clock"></i>
                                    Time
                                </label>
                                <input type="time" id="eventTime" x-model="newEvent.time" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="eventDescription">
                                <i class="fas fa-align-left"></i>
                                Description
                            </label>
                            <textarea id="eventDescription" x-model="newEvent.description" 
                                      placeholder="Describe your event..." rows="4"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="eventLocation">
                                <i class="fas fa-map-marker-alt"></i>
                                Location
                            </label>
                            <input type="text" id="eventLocation" x-model="newEvent.location" 
                                   placeholder="Event location">
                        </div>

                        <div class="form-actions">
                            <button type="button" @click="resetEventForm()" class="btn-secondary">
                                <i class="fas fa-times"></i>
                                Cancel
                            </button>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-plus"></i>
                                Create Event
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Requests Management Page -->
            <div class="page" x-show="currentPage === 'requests'">
                <div class="event-form-container">
                    <div class="form-header">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 60px; height: 60px; margin-bottom: 1rem;">
                        <h2>Join Requests</h2>
                        <p>Approve or deny student club join requests</p>
                    </div>
                    <div class="event-form">
                        <template x-if="canManageRequests()">
                          <div>
                            <h3 style="margin-bottom: .75rem;">Pending Requests</h3>
                            <div class="events-grid">
                              <template x-for="req in getPendingRequests()" :key="req.id">
                                <div class="event-card">
                                  <h3 x-text="req.name"></h3>
                                  <p><strong>Username:</strong> <span x-text="req.username"></span></p>
                                  <p><strong>Email:</strong> <span x-text="req.email"></span></p>
                                  <p><strong>Club:</strong> <span x-text="getClubName(req.club)"></span></p>
                                  <div class="event-actions">
                                    <button class="btn-primary" @click="approveRequest(req)"><i class="fas fa-check"></i> Approve</button>
                                    <button class="btn-danger" @click="denyRequest(req)"><i class="fas fa-times"></i> Deny</button>
                                  </div>
                                </div>
                              </template>
                            </div>
                            <h3 style="margin: 1.25rem 0 .75rem;">All Requests</h3>
                            <div class="events-grid">
                              <template x-for="req in getAllRequests()" :key="req.id">
                                <div class="event-card">
                                  <h3 x-text="req.name + ' (' + req.username + ')' "></h3>
                                  <p><strong>Club:</strong> <span x-text="getClubName(req.club)"></span></p>
                                  <p><strong>Status:</strong> <span x-text="req.status"></span></p>
                                </div>
                              </template>
                            </div>
                          </div>
                        </template>
                        <template x-if="isStudent()">
                          <div style="margin-top: 1rem;">
                            <h3 style="margin-bottom: .75rem;">Request to Join a Club</h3>
                            <div class="form-row">
                              <div class="form-group">
                                <label><i class="fas fa-user"></i> Name</label>
                                <input type="text" x-model="joinRequestForm.name" placeholder="Your full name">
                              </div>
                              <div class="form-group">
                                <label><i class="fas fa-envelope"></i> Email</label>
                                <input type="email" x-model="joinRequestForm.email" placeholder="your@email.com">
                              </div>
                            </div>
                            <div class="form-group">
                              <label><i class="fas fa-users"></i> Club</label>
                              <select x-model="joinRequestForm.club">
                                <option value="">Select Club</option>
                                <option value="astronomy">ðŸ”­ Astronomy Club</option>
                                <option value="sports">âš½ Sports Club</option>
                                <option value="gdg">ðŸ’» GDG Club</option>
                                <option value="music">ðŸŽµ Music Club</option>
                                <option value="drama">ðŸŽ­ Drama Club</option>
                              </select>
                            </div>
                            <div class="form-actions">
                              <button class="btn-primary" @click="submitJoinRequest()"><i class="fas fa-paper-plane"></i> Submit Request</button>
                            </div>
                          </div>
                        </template>
                    </div>
                </div>
            </div>


            <!-- About Page -->
            <div class="page" x-show="currentPage === 'about'">
                <div class="about-container">
                    <div class="about-header">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 80px; height: 80px; margin-bottom: 1rem;">
                        <h2>About IÂ²IT College Event Manager</h2>
                        <p>Empowering student life through organized events</p>
                    </div>
                    
                    <div class="about-content">
                        <div class="about-section">
                            <h3><i class="fas fa-bullseye"></i> Our Mission</h3>
                            <p>To provide a comprehensive platform for managing and organizing college events, fostering student engagement and community building at I2IT College.</p>
                        </div>
                        
                        <div class="about-section">
                            <h3><i class="fas fa-star"></i> Key Features</h3>
                            <ul>
                                <li>Intuitive event creation and management</li>
                                <li>Interactive calendar with real-time updates</li>
                                <li>Smart notifications for upcoming events</li>
                                <li>Multi-club support with unique branding</li>
                                <li>Responsive design for all devices</li>
                                <li>Data analytics and insights</li>
                            </ul>
                        </div>
                        
                        <div class="about-section">
                            <h3><i class="fas fa-users"></i> Supported Clubs</h3>
                            <div class="clubs-showcase">
                                <div class="club-item">
                                    <span class="club-icon">ðŸ”­</span>
                                    <span>Astronomy Club</span>
                                </div>
                                <div class="club-item">
                                    <span class="club-icon">âš½</span>
                                    <span>Sports Club</span>
                                </div>
                                <div class="club-item">
                                    <span class="club-icon">ðŸ’»</span>
                                    <span>GDG Club</span>
                                </div>
                                <div class="club-item">
                                    <span class="club-icon">ðŸŽµ</span>
                                    <span>Music Club</span>
                                </div>
                                <div class="club-item">
                                    <span class="club-icon">ðŸŽ­</span>
                                    <span>Drama Club</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Management Page -->
            <div class="page" x-show="currentPage === 'userManagement'">
                <div class="event-form-container">
                    <div class="form-header">
                        <div class="logo-container-enhanced">
                            <img src="logo.png" alt="IÂ²IT Logo" class="college-logo-enhanced">
                        </div>
                        <h2>User Management</h2>
                        <p>Manage users, branches, and permissions</p>
                    </div>
                    
                    <div class="user-management-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn" :class="{ active: userManagementTab === 'users' }" @click="userManagementTab = 'users'">
                                <i class="fas fa-users"></i> Users
                            </button>
                            <button class="tab-btn" :class="{ active: userManagementTab === 'branches' }" @click="userManagementTab = 'branches'">
                                <i class="fas fa-building"></i> Branches
                            </button>
                            <button class="tab-btn" :class="{ active: userManagementTab === 'create' }" @click="userManagementTab = 'create'">
                                <i class="fas fa-user-plus"></i> Create User
                            </button>
                        </div>

                        <!-- Users Tab -->
                        <div class="tab-content" x-show="userManagementTab === 'users'">
                            <div class="users-header">
                                <h3>All Users</h3>
                                <div class="users-controls">
                                    <div class="search-box">
                                        <i class="fas fa-search"></i>
                                        <input type="text" x-model="userSearchQuery" placeholder="Search users..." class="search-input">
                                    </div>
                                    <div class="filter-controls">
                                        <select x-model="userRoleFilter" class="filter-select">
                                            <option value="">All Roles</option>
                                            <option value="admin">Administrator</option>
                                            <option value="clubHead">Club Head</option>
                                            <option value="student">Student</option>
                                        </select>
                                        <select x-model="userBranchFilter" class="filter-select">
                                            <option value="">All Branches</option>
                                            <template x-for="branch in branches" :key="branch.id">
                                                <option :value="branch.code" x-text="branch.name"></option>
                                            </template>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="users-stats">
                                <div class="stat-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h4 x-text="filteredUsers.length"></h4>
                                        <p>Total Users</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-user-shield"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h4 x-text="getUsersByRole('admin').length"></h4>
                                        <p>Administrators</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-user-tie"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h4 x-text="getUsersByRole('clubHead').length"></h4>
                                        <p>Club Heads</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h4 x-text="getUsersByRole('student').length"></h4>
                                        <p>Students</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bulk-actions" x-show="selectedUsers.length > 0">
                                <div class="bulk-info">
                                    <span x-text="selectedUsers.length + ' users selected'"></span>
                                </div>
                                <div class="bulk-buttons">
                                    <button class="btn-secondary" @click="bulkDeleteUsers()">
                                        <i class="fas fa-trash"></i> Delete Selected
                                    </button>
                                    <button class="btn-secondary" @click="bulkResetPasswords()">
                                        <i class="fas fa-key"></i> Reset Passwords
                                    </button>
                                    <button class="btn-secondary" @click="clearSelection()">
                                        <i class="fas fa-times"></i> Clear Selection
                                    </button>
                                </div>
                            </div>
                            
                            <div class="users-grid">
                                <template x-for="user in filteredUsers" :key="user.username">
                                    <div class="user-card" :class="{ 'selected': selectedUsers.includes(user.username) }">
                                        <div class="user-checkbox">
                                            <input type="checkbox" :id="'user-' + user.username" 
                                                   :value="user.username" 
                                                   x-model="selectedUsers"
                                                   x-show="user.username !== 'admin'">
                                            <label :for="'user-' + user.username"></label>
                                        </div>
                                        <div class="user-info">
                                            <h4 x-text="user.username"></h4>
                                            <p x-text="user.role === 'admin' ? 'Administrator' : (user.role === 'clubHead' ? ('Club Head - ' + getClubName(user.club)) : 'Student')"></p>
                                            <p x-text="user.branch ? 'Branch: ' + user.branch : ''"></p>
                                            <p x-text="user.email ? 'Email: ' + user.email : ''"></p>
                                        </div>
                                        <div class="user-actions">
                                            <button class="btn-primary" @click="editUser(user)" title="Edit User">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-secondary" @click="resetUserPassword(user)" title="Reset Password">
                                                <i class="fas fa-key"></i>
                                            </button>
                                            <button class="btn-danger" @click="deleteUser(user)" x-show="user.username !== 'admin'" title="Delete User">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Branches Tab -->
                        <div class="tab-content" x-show="userManagementTab === 'branches'">
                            <h3>Manage Branches</h3>
                            <div class="branches-section">
                                <div class="existing-branches">
                                    <h4>Existing Branches</h4>
                                    <div class="branches-grid">
                                        <template x-for="branch in branches" :key="branch.id">
                                            <div class="branch-card">
                                                <h5 x-text="branch.name"></h5>
                                                <p x-text="branch.description"></p>
                                                <div class="branch-actions">
                                                    <button class="btn-secondary" @click="editBranch(branch)">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button class="btn-danger" @click="deleteBranch(branch)">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                                
                                <div class="add-branch">
                                    <h4>Add New Branch</h4>
                                    <form @submit.prevent="addBranch" class="branch-form">
                                        <div class="form-group">
                                            <label for="branchName">Branch Name</label>
                                            <input type="text" id="branchName" x-model="newBranch.name" required placeholder="e.g., Information Technology">
                                        </div>
                                        <div class="form-group">
                                            <label for="branchCode">Branch Code</label>
                                            <input type="text" id="branchCode" x-model="newBranch.code" required placeholder="e.g., IT">
                                        </div>
                                        <div class="form-group">
                                            <label for="branchDescription">Description</label>
                                            <textarea id="branchDescription" x-model="newBranch.description" placeholder="Branch description..."></textarea>
                                        </div>
                                        <button type="submit" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Branch
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Create User Tab -->
                        <div class="tab-content" x-show="userManagementTab === 'create'">
                            <h3>Create New User</h3>
                            <form @submit.prevent="createUser" class="user-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newUsername">Username</label>
                                        <input type="text" id="newUsername" x-model="newUser.username" required placeholder="Enter username">
                                    </div>
                                    <div class="form-group">
                                        <label for="newPassword">Password</label>
                                        <input type="password" id="newPassword" x-model="newUser.password" required placeholder="Enter password">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newRole">Role</label>
                                        <select id="newRole" x-model="newUser.role" required @change="updateRoleOptions()">
                                            <option value="">Select Role</option>
                                            <option value="admin">Administrator</option>
                                            <option value="clubHead">Club Head</option>
                                            <option value="student">Student</option>
                                        </select>
                                    </div>
                                    <div class="form-group" x-show="newUser.role === 'clubHead'">
                                        <label for="newClub">Club</label>
                                        <select id="newClub" x-model="newUser.club">
                                            <option value="">Select Club</option>
                                            <option value="astronomy">ðŸ”­ Astronomy Club</option>
                                            <option value="sports">âš½ Sports Club</option>
                                            <option value="gdg">ðŸ’» GDG Club</option>
                                            <option value="music">ðŸŽµ Music Club</option>
                                            <option value="drama">ðŸŽ­ Drama Club</option>
                                            <option value="IEEE">ðŸ¦´ IEEE Club</option>
                                            <option value="ACM">ðŸ’» ACM Club</option>
                                            <option value="ITSA">ðŸ‘Œ ITSA Club</option>
                                            <option value="CESA">ðŸ‘Ž CESA Club</option>
                                            <option value="IIC">ðŸ’¡ IIC Club</option>
                                            <option value="cybersec">ðŸ’» Cybersec Club</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newBranch">Branch</label>
                                        <select id="newBranch" x-model="newUser.branch" required>
                                            <option value="">Select Branch</option>
                                            <template x-for="branch in branches" :key="branch.id">
                                                <option :value="branch.code" x-text="branch.name"></option>
                                            </template>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="newEmail">Email</label>
                                        <input type="email" id="newEmail" x-model="newUser.email" placeholder="user@i2it.ac.in">
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="button" @click="resetUserForm()" class="btn-secondary">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-user-plus"></i> Create User
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Page -->
            <div class="page" x-show="currentPage === 'contact'">
                <div class="contact-container">
                    <div class="contact-header">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 80px; height: 80px; margin-bottom: 1rem;">
                        <h2>Contact Us</h2>
                        <p>Get in touch with the IÂ²ITs Event Management Team</p>
                    </div>
                    
                    <div class="contact-content">
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div>
                                    <h4>Address</h4>
                                    <p>IÂ²IT College, Pune, Maharashtra</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <h4>Phone</h4>
                                    <p>+91 123 456 7890</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <h4>Email</h4>
                                    <p>events@i2it.ac.in</p>
                                </div>
                            </div>
                        </div>
                        
                        <form @submit.prevent="submitContact" class="contact-form">
                            <div class="form-group">
                                <label for="contactName">Name</label>
                                <input type="text" id="contactName" x-model="contactForm.name" required>
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email</label>
                                <input type="email" id="contactEmail" x-model="contactForm.email" required>
                            </div>
                            <div class="form-group">
                                <label for="contactSubject">Subject</label>
                                <input type="text" id="contactSubject" x-model="contactForm.subject" required>
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Message</label>
                                <textarea id="contactMessage" x-model="contactForm.message" required rows="5"></textarea>
                            </div>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                Send Message
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Event Details Modal -->
    <div class="modal" x-show="showEventModal && currentUser" @click.away="showEventModal = false">
        <div class="modal-content event-details-modal">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 40px; height: 40px;">
                    <h3 x-text="selectedEvent?.name"></h3>
                </div>
                <button @click="showEventModal = false" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" x-show="selectedEvent">
                <div class="event-details">
                    <div class="detail-item">
                        <i class="fas fa-calendar"></i>
                        <span x-text="formatDate(selectedEvent?.date)"></span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-clock"></i>
                        <span x-text="selectedEvent?.time"></span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-users"></i>
                        <span x-text="getClubName(selectedEvent?.club)"></span>
                    </div>
                    <div class="detail-item" x-show="selectedEvent?.location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span x-text="selectedEvent?.location"></span>
                    </div>
                </div>
                <div class="event-description">
                    <h4>Description</h4>
                    <p x-text="selectedEvent?.description"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button @click="editEvent(selectedEvent)" class="btn-secondary" x-show="isAdmin() || (isClubHead() && selectedEvent?.club === currentUser?.club)">
                    <i class="fas fa-edit"></i>
                    Edit Event
                </button>
                <button @click="deleteEvent(selectedEvent)" class="btn-danger" x-show="isAdmin() || (isClubHead() && selectedEvent?.club === currentUser?.club)">
                    <i class="fas fa-trash"></i>
                    Delete Event
                </button>
            </div>
        </div>
    </div>

    <!-- Day Events Modal -->
    <div class="modal" x-show="showDayEventsModal && currentUser" @click.away="showDayEventsModal = false">
        <div class="modal-content event-details-modal">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 40px; height: 40px;">
                    <h3 x-text="formatDate(selectedDate) + ' â€” ' + selectedDayEvents.length + ' events'"></h3>
                </div>
                <button @click="showDayEventsModal = false" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="events-grid">
                    <template x-for="ev in selectedDayEvents" :key="ev.id">
                        <div class="event-card" :class="ev.club">
                            <div class="event-header">
                                <div class="event-time">
                                    <i class="fas fa-clock"></i>
                                    <span x-text="ev.time"></span>
                                </div>
                                <div class="event-club-badge" x-text="getClubName(ev.club)"></div>
                            </div>
                            <h3 x-text="ev.name"></h3>
                            <p x-text="ev.description"></p>
                            <div class="event-actions">
                                <button @click="showEventDetails(ev)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button @click="editEvent(ev)" x-show="isAdmin() || (isClubHead() && ev.club === currentUser?.club)">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Club Selection Modal -->
    <div class="modal" x-show="showStudentClubModal && currentUser && isStudent()" @click.away="showStudentClubModal = false">
        <div class="modal-content event-details-modal">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <img src="logo.png" alt="IÂ²IT Logo" class="college-logo" style="width: 40px; height: 40px;">
                    <h3>Select Your Club</h3>
                </div>
                <button @click="showStudentClubModal = false" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label><i class="fas fa-users"></i> Choose a club to view events</label>
                    <select x-model="studentClubSelection">
                        <option value="">Select Club</option>
                        <option value="astronomy">ðŸ”­ Astronomy Club</option>
                        <option value="sports">âš½ Sports Club</option>
                        <option value="gdg">ðŸ’» GDG Club</option>
                        <option value="music">ðŸŽµ Music Club</option>
                        <option value="drama">ðŸŽ­ Drama Club</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" @click="showStudentClubModal = false">Cancel</button>
                <button class="btn-primary" @click="confirmStudentClub()"><i class="fas fa-check"></i> Confirm</button>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container" x-show="currentUser">
        <div class="fab-logo">
            <img src="logo.png" alt="IÂ²IT Logo" class="college-logo fab-logo-img">
        </div>
        <button class="fab-main" @click="fabOpen = !fabOpen">
            <i class="fas fa-plus" x-show="!fabOpen"></i>
            <i class="fas fa-times" x-show="fabOpen"></i>
        </button>
        
        <div class="fab-options" x-show="fabOpen" x-transition>
            <button class="fab-option" @click="currentPage = 'events'; fabOpen = false" title="Add Event" x-show="canCreateEvent()">
                <i class="fas fa-calendar-plus"></i>
            </button>
            <button class="fab-option" @click="currentPage = 'calendar'; fabOpen = false" title="View Calendar">
            </button>
            <button class="fab-option" @click="exportEvents(); fabOpen = false" title="Export Events">
                <i class="fas fa-download"></i>
            </button>
        </div>
    </div>

    <!-- Quick Access Toolbar -->
    <div class="quick-toolbar" x-show="currentUser">
        <div class="toolbar-logo">
            <img src="logo.png" alt="IÂ²IT Logo" class="college-logo toolbar-logo">
        </div>
        <div class="toolbar-item" @click="currentPage = 'dashboard'" :class="{ active: currentPage === 'dashboard' }">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="toolbar-item" @click="currentPage = 'calendar'" :class="{ active: currentPage === 'calendar' }">
            <span>Calendar</span>
        </div>
        <div class="toolbar-item" @click="currentPage = 'events'" :class="{ active: currentPage === 'events' }" x-show="canCreateEvent()">
            <i class="fas fa-plus"></i>
            <span>Add</span>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" x-show="showEditUserModal" @click.away="showEditUserModal = false">
        <div class="modal-content">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <div class="modal-logo-container">
                        <img src="logo.png" alt="IÂ²IT Logo" class="college-logo-modal">
                    </div>
                    <h3>Edit User</h3>
                </div>
                <button @click="showEditUserModal = false" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form @submit.prevent="updateUser" class="user-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editUsername">Username</label>
                            <input type="text" id="editUsername" x-model="editingUser.username" required readonly>
                        </div>
                        <div class="form-group">
                            <label for="editPassword">New Password (leave blank to keep current)</label>
                            <input type="password" id="editPassword" x-model="editingUser.password" placeholder="Enter new password">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editRole">Role</label>
                            <select id="editRole" x-model="editingUser.role" required>
                                <option value="admin">Administrator</option>
                                <option value="clubHead">Club Head</option>
                                <option value="student">Student</option>
                            </select>
                        </div>
                        <div class="form-group" x-show="editingUser.role === 'clubHead'">
                            <label for="editClub">Club</label>
                            <select id="editClub" x-model="editingUser.club">
                                <option value="">Select Club</option>
                                <option value="astronomy">ðŸ”­ Astronomy Club</option>
                                <option value="sports">âš½ Sports Club</option>
                                <option value="gdg">ðŸ’» GDG Club</option>
                                <option value="music">ðŸŽµ Music Club</option>
                                <option value="drama">ðŸŽ­ Drama Club</option>
                                <option value="IEEE">ðŸ¦´ IEEE Club</option>
                                <option value="ACM">ðŸ’» ACM Club</option>
                                <option value="ITSA">ðŸ‘Œ ITSA Club</option>
                                <option value="CESA">ðŸ‘Ž CESA Club</option>
                                <option value="IIC">ðŸ’¡ IIC Club</option>
                                <option value="cybersec">ðŸ’» Cybersec Club</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editBranch">Branch</label>
                            <select id="editBranch" x-model="editingUser.branch" required>
                                <option value="">Select Branch</option>
                                <template x-for="branch in branches" :key="branch.id">
                                    <option :value="branch.code" x-text="branch.name"></option>
                                </template>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editEmail">Email</label>
                            <input type="email" id="editEmail" x-model="editingUser.email" placeholder="user@i2it.ac.in">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button @click="showEditUserModal = false" class="btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button @click="updateUser()" class="btn-primary">
                    <i class="fas fa-save"></i> Update User
                </button>
            </div>
        </div>
    </div>

    <!-- Alert Notifications -->
    <div class="alert-container">
        <div class="alert" x-show="showAlert" x-transition>
            <div class="alert-content">
                <img src="logo.png" alt="IÂ²IT Logo" class="college-logo alert-logo">
                <i class="fas fa-check-circle"></i>
                <span x-text="alertMessage"></span>
            </div>
            <button @click="showAlert = false" class="alert-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> 